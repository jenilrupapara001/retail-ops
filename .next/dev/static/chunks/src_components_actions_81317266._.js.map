{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jenilrupapara/Easysell%20Projects/GMS%20Report/gms-dashboard/src/components/actions/CompletionModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { X, Mic, Square, Play, Pause, Clock, Calendar, Repeat } from 'lucide-react';\n\nconst CompletionModal = ({ action, isOpen, onClose, onComplete }) => {\n    const [formData, setFormData] = useState({\n        remarks: '',\n        stage: 'COMPLETED',\n        recurring: {\n            enabled: false,\n            frequency: 'WEEKLY',\n            daysOfWeek: []\n        }\n    });\n\n    const [isRecording, setIsRecording] = useState(false);\n    const [audioBlob, setAudioBlob] = useState(null);\n    const [transcript, setTranscript] = useState('');\n    const [mediaRecorder, setMediaRecorder] = useState(null);\n    const [recognition, setRecognition] = useState(null);\n\n    useEffect(() => {\n        // Initialize Web Speech API\n        if ('webkitSpeechRecognition' in window) {\n            const speechRecognition = new window.webkitSpeechRecognition();\n            speechRecognition.continuous = true;\n            speechRecognition.interimResults = true;\n            speechRecognition.lang = 'en-US';\n\n            speechRecognition.onresult = (event) => {\n                let finalTranscript = '';\n                for (let i = event.resultIndex; i < event.results.length; i++) {\n                    if (event.results[i].isFinal) {\n                        finalTranscript += event.results[i][0].transcript + ' ';\n                    }\n                }\n                if (finalTranscript) {\n                    setTranscript(prev => prev + finalTranscript);\n                    setFormData(prev => ({\n                        ...prev,\n                        remarks: prev.remarks + finalTranscript\n                    }));\n                }\n            };\n\n            setRecognition(speechRecognition);\n        }\n    }, []);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const toggleRecurring = () => {\n        setFormData(prev => ({\n            ...prev,\n            recurring: { ...prev.recurring, enabled: !prev.recurring.enabled }\n        }));\n    };\n\n    const toggleDay = (day) => {\n        setFormData(prev => {\n            const days = prev.recurring.daysOfWeek.includes(day)\n                ? prev.recurring.daysOfWeek.filter(d => d !== day)\n                : [...prev.recurring.daysOfWeek, day];\n            return {\n                ...prev,\n                recurring: { ...prev.recurring, daysOfWeek: days }\n            };\n        });\n    };\n\n    const startRecording = async () => {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            const recorder = new MediaRecorder(stream);\n            const chunks = [];\n\n            recorder.ondataavailable = (e) => chunks.push(e.data);\n            recorder.onstop = () => {\n                const blob = new Blob(chunks, { type: 'audio/webm' });\n                setAudioBlob(blob);\n            };\n\n            recorder.start();\n            setMediaRecorder(recorder);\n            setIsRecording(true);\n\n            // Start speech recognition\n            if (recognition) {\n                recognition.start();\n            }\n        } catch (error) {\n            console.error('Error accessing microphone:', error);\n            alert('Could not access microphone. Please check permissions.');\n        }\n    };\n\n    const stopRecording = () => {\n        if (mediaRecorder && mediaRecorder.state !== 'inactive') {\n            mediaRecorder.stop();\n            mediaRecorder.stream.getTracks().forEach(track => track.stop());\n        }\n        if (recognition) {\n            recognition.stop();\n        }\n        setIsRecording(false);\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        const completionData = {\n            ...formData,\n            audioBlob,\n            transcript,\n            completedAt: new Date()\n        };\n\n        onComplete(action._id, completionData);\n    };\n\n    if (!isOpen) return null;\n\n    const duration = action.timeTracking?.startedAt\n        ? Math.floor((new Date() - new Date(action.timeTracking.startedAt)) / 1000 / 60)\n        : 0;\n\n    return (\n        <div className=\"modal-overlay\" onClick={onClose}>\n            <div className=\"modal-dialog modal-lg\" onClick={(e) => e.stopPropagation()}>\n                <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h5 className=\"modal-title\">Complete Task</h5>\n                        <button type=\"button\" className=\"btn-close\" onClick={onClose} aria-label=\"Close\">\n                            <X style={{ width: '20px', height: '20px' }} />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit}>\n                        <div className=\"modal-body\">\n                            {/* Task Summary */}\n                            <div className=\"mb-3\">\n                                <h6 className=\"text-muted mb-2\">Task: {action.title}</h6>\n                                <div className=\"d-flex align-items-center gap-3 text-sm text-muted\">\n                                    <span>\n                                        <Clock style={{ width: '14px', height: '14px' }} className=\"me-1\" />\n                                        Duration: {duration} minutes\n                                    </span>\n                                    {action.timeTracking?.timeLimit && (\n                                        <span className={duration > action.timeTracking.timeLimit ? 'text-danger' : ''}>\n                                            Limit: {action.timeTracking.timeLimit} minutes\n                                        </span>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* Completion Remarks */}\n                            <div className=\"mb-3\">\n                                <label className=\"form-label\">Completion Remarks *</label>\n                                <div className=\"position-relative\">\n                                    <textarea\n                                        name=\"remarks\"\n                                        value={formData.remarks}\n                                        onChange={handleChange}\n                                        required\n                                        rows=\"5\"\n                                        className=\"form-control\"\n                                        placeholder=\"Describe what you did, challenges faced, and outcomes...\"\n                                    />\n                                    <button\n                                        type=\"button\"\n                                        className={`btn btn-sm position-absolute ${isRecording ? 'btn-danger' : 'btn-outline-primary'}`}\n                                        style={{ top: '10px', right: '10px' }}\n                                        onClick={isRecording ? stopRecording : startRecording}\n                                        title={isRecording ? 'Stop Recording' : 'Start Voice Recording'}\n                                    >\n                                        {isRecording ? (\n                                            <>\n                                                <Square style={{ width: '14px', height: '14px' }} className=\"me-1\" />\n                                                Stop\n                                            </>\n                                        ) : (\n                                            <>\n                                                <Mic style={{ width: '14px', height: '14px' }} className=\"me-1\" />\n                                                Record\n                                            </>\n                                        )}\n                                    </button>\n                                </div>\n                                {isRecording && (\n                                    <small className=\"text-danger d-flex align-items-center mt-1\">\n                                        <span className=\"recording-indicator me-2\"></span>\n                                        Recording... Speak clearly into your microphone\n                                    </small>\n                                )}\n                                {transcript && (\n                                    <small className=\"text-success mt-1 d-block\">\n                                        âœ“ Transcribed {transcript.split(' ').length} words\n                                    </small>\n                                )}\n                            </div>\n\n                            {/* Stage Selection */}\n                            <div className=\"mb-3\">\n                                <label className=\"form-label\">Final Stage</label>\n                                <select\n                                    name=\"stage\"\n                                    value={formData.stage}\n                                    onChange={handleChange}\n                                    className=\"form-select\"\n                                >\n                                    <option value=\"REVIEW\">Review Required</option>\n                                    <option value=\"COMPLETED\">Completed</option>\n                                </select>\n                            </div>\n\n                            {/* Recurring Task Configuration */}\n                            <div className=\"mb-3\">\n                                <div className=\"form-check mb-2\">\n                                    <input\n                                        type=\"checkbox\"\n                                        className=\"form-check-input\"\n                                        id=\"recurringCheck\"\n                                        checked={formData.recurring.enabled}\n                                        onChange={toggleRecurring}\n                                    />\n                                    <label className=\"form-check-label\" htmlFor=\"recurringCheck\">\n                                        <Repeat style={{ width: '14px', height: '14px' }} className=\"me-1\" />\n                                        Repeat this task\n                                    </label>\n                                </div>\n\n                                {formData.recurring.enabled && (\n                                    <div className=\"recurring-config ps-4\">\n                                        <div className=\"mb-2\">\n                                            <label className=\"form-label\">Frequency</label>\n                                            <select\n                                                value={formData.recurring.frequency}\n                                                onChange={(e) => setFormData(prev => ({\n                                                    ...prev,\n                                                    recurring: { ...prev.recurring, frequency: e.target.value }\n                                                }))}\n                                                className=\"form-select form-select-sm\"\n                                            >\n                                                <option value=\"DAILY\">Daily</option>\n                                                <option value=\"WEEKLY\">Weekly</option>\n                                                <option value=\"MONTHLY\">Monthly</option>\n                                            </select>\n                                        </div>\n\n                                        {formData.recurring.frequency === 'WEEKLY' && (\n                                            <div>\n                                                <label className=\"form-label\">Repeat on</label>\n                                                <div className=\"day-selector d-flex gap-2 flex-wrap\">\n                                                    {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day, i) => (\n                                                        <div key={i} className=\"form-check\">\n                                                            <input\n                                                                type=\"checkbox\"\n                                                                className=\"form-check-input\"\n                                                                id={`day-${i}`}\n                                                                checked={formData.recurring.daysOfWeek.includes(i)}\n                                                                onChange={() => toggleDay(i)}\n                                                            />\n                                                            <label className=\"form-check-label\" htmlFor={`day-${i}`}>\n                                                                {day}\n                                                            </label>\n                                                        </div>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" onClick={onClose} className=\"btn btn-secondary\">\n                                Cancel\n                            </button>\n                            <button type=\"submit\" className=\"btn btn-success\">\n                                <i className=\"bi bi-check-circle me-2\"></i>\n                                Complete Task\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CompletionModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"sources":["file:///Users/jenilrupapara/Easysell%20Projects/GMS%20Report/gms-dashboard/src/components/actions/ActionListEnhanced.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { Edit2, Trash2, CheckCircle, Clock, AlertTriangle, Filter, Search, Play, Square, Plus, Sparkles, Loader2, BarChart2, Calendar, AlertCircle, ArrowDown, Minus, ThumbsUp, ThumbsDown, RotateCcw, FileText } from 'lucide-react';\nimport CompletionModal from './CompletionModal';\n\nconst ActionList = ({\n    actions = [],\n    objectives = [],\n    loading,\n    activeFilter = 'ALL',\n    searchQuery = '',\n    currentUser,\n    onSearchChange,\n    onDelete,\n    onEdit,\n    onAddAction,\n    onAISuggest,\n    onStatusChange,\n    onStartTask,\n    onCompleteTask,\n    onSubmitForReview,\n    onReviewAction,\n    viewMode = 'STRATEGIC' // STRATEGIC or OPERATIONS\n}) => {\n    const [filterStatus, setFilterStatus] = useState('');\n    const [filterPriority, setFilterPriority] = useState('');\n    const [completionModalOpen, setCompletionModalOpen] = useState(false);\n    const [selectedAction, setSelectedAction] = useState(null);\n    const [timers, setTimers] = useState({});\n    const [expandedRows, setExpandedRows] = useState({});\n\n    // Update timers every second for actions in progress\n    useEffect(() => {\n        const interval = setInterval(() => {\n            const newTimers = {};\n            actions.forEach(action => {\n                const id = action._id || action.id;\n                if (action.timeTracking?.startedAt && !action.timeTracking?.completedAt) {\n                    const elapsed = Math.floor((new Date() - new Date(action.timeTracking.startedAt)) / 1000 / 60);\n                    newTimers[id] = elapsed;\n                }\n            });\n            setTimers(newTimers);\n        }, 1000);\n\n        return () => clearInterval(interval);\n    }, [actions]);\n\n    const isTaskStarted = (action) => {\n        return action.timeTracking?.startedAt && !action.timeTracking?.completedAt;\n    };\n\n    const isTaskCompleted = (action) => {\n        return action.timeTracking?.completedAt || action.status === 'COMPLETED';\n    };\n\n    // Robust Permission Helpers\n    const hasAdminPrivileges = (user) => {\n        if (!user) return false;\n        const role = (user.role?.name || user.role || '').toLowerCase();\n        return ['admin', 'manager', 'administrator', 'superadmin'].includes(role);\n    };\n\n    const isOwnerOfItem = (item, user) => {\n        if (!item || !user) return false;\n        const userId = (user._id || user.id)?.toString();\n        if (!userId) return false;\n\n        // Check various owner/assignee fields\n        const ownerId = (item.owner?._id || item.owner)?.toString();\n        const assignedId = (item.assignedTo?._id || item.assignedTo)?.toString();\n        const createdById = (item.createdBy?._id || item.createdBy)?.toString();\n\n        return userId === ownerId || userId === assignedId || userId === createdById;\n    };\n\n    // Shared Filtering Logic\n    const matchesFilters = (action) => {\n        const now = new Date();\n        const tomorrow = new Date();\n        tomorrow.setDate(now.getDate() + 1);\n        tomorrow.setHours(0, 0, 0, 0);\n\n        const matchesSearch = !searchQuery ||\n            action.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n            action.description?.toLowerCase().includes(searchQuery.toLowerCase());\n\n        if (!matchesSearch) return false;\n        if (filterStatus && action.status !== filterStatus) return false;\n        if (filterPriority && action.priority !== filterPriority) return false;\n\n        // KPI active filters\n        if (activeFilter === 'ALL') return true;\n        if (activeFilter === 'TODO') return action.status !== 'COMPLETED';\n        if (activeFilter === 'PENDING') return action.status === 'PENDING';\n        if (activeFilter === 'IN_PROGRESS') return action.status === 'IN_PROGRESS';\n        if (activeFilter === 'REVIEW') return action.status === 'REVIEW';\n        if (activeFilter === 'COMPLETED') return action.status === 'COMPLETED';\n        if (activeFilter === 'OVERDUE') return action.timeTracking?.deadline && new Date(action.timeTracking.deadline) < now && action.status !== 'COMPLETED';\n        if (activeFilter === 'TOMORROW') {\n            if (!action.timeTracking?.deadline) return false;\n            const d = new Date(action.timeTracking.deadline);\n            const dayAfter = new Date(tomorrow);\n            dayAfter.setDate(tomorrow.getDate() + 1);\n            return d >= tomorrow && d < dayAfter && action.status !== 'COMPLETED';\n        }\n        if (activeFilter === 'UPCOMING') {\n            if (!action.timeTracking?.deadline) return false;\n            const d = new Date(action.timeTracking.deadline);\n            const dayAfter = new Date(tomorrow);\n            dayAfter.setDate(tomorrow.getDate() + 1);\n            return d >= dayAfter && action.status !== 'COMPLETED';\n        }\n\n        return true;\n    };\n\n    // Auto-expand everything if filtering or searching\n    useEffect(() => {\n        if (activeFilter !== 'ALL' || searchQuery || filterStatus) {\n            const newExpanded = {};\n            objectives.forEach(obj => {\n                newExpanded[obj.id || obj._id] = true;\n                (obj.keyResults || []).forEach(kr => {\n                    newExpanded[kr.id || kr._id] = true;\n                });\n            });\n            setExpandedRows(newExpanded);\n        }\n    }, [activeFilter, searchQuery, filterStatus, objectives]);\n\n    const handleStartTask = (action) => {\n        if (onStartTask) onStartTask(action);\n    };\n\n    const toggleRow = (id) => {\n        setExpandedRows(prev => ({ ...prev, [id]: !prev[id] }));\n    };\n\n    const getStatusDot = (status) => {\n        if (status === 'COMPLETED') return <span className=\"status-dot status-dot-green\"></span>;\n        if (status === 'IN_PROGRESS') return <span className=\"status-dot status-dot-yellow\"></span>;\n        if (status === 'REVIEW') return <span className=\"status-dot status-dot-purple\"></span>;\n        if (status === 'PENDING') return <span className=\"status-dot status-dot-gray\"></span>;\n        return <span className=\"status-dot status-dot-red\"></span>;\n    };\n\n    const renderPriorityIcon = (priority) => {\n        switch (priority) {\n            case 'HIGH':\n            case 'URGENT':\n                return <AlertCircle size={14} className=\"priority-high\" />;\n            case 'MEDIUM':\n                return <Minus size={14} className=\"priority-medium\" />;\n            case 'LOW':\n                return <ArrowDown size={14} className=\"priority-low\" />;\n            default:\n                return null;\n        }\n    };\n\n    const formatUserName = (user) => {\n        if (!user) return null;\n        const first = user.firstName || '';\n        const last = user.lastName || '';\n        return `${first} ${last}`.trim() || user.email?.split('@')[0] || 'User';\n    };\n\n    const ChevronIcon = ({ expanded }) => (\n        <span className=\"me-2 text-muted\" style={{ cursor: 'pointer', transition: 'transform 0.2s', display: 'inline-block', transform: expanded ? 'rotate(90deg)' : 'none' }}>\n            <Play size={10} fill=\"currentColor\" />\n        </span>\n    );\n\n    const renderTreeTable = () => {\n        const normalizedObjectives = (objectives || []).map(obj => {\n            let totalActions = 0;\n            let completedActions = 0;\n            const krs = obj.keyResults || [];\n            krs.forEach(kr => {\n                const actions = kr.actions || [];\n                totalActions += actions.length;\n                completedActions += actions.filter(a => isTaskCompleted(a)).length;\n            });\n            return {\n                ...obj,\n                id: obj._id || obj.id,\n                stats: {\n                    total: totalActions,\n                    completed: completedActions,\n                    progress: obj.progress || (totalActions > 0 ? Math.round((completedActions / totalActions) * 100) : 0)\n                }\n            };\n        });\n\n        const filteredObjectives = normalizedObjectives.map(obj => {\n            const filteredKRs = (obj.keyResults || []).map(kr => {\n                const filteredActions = (kr.actions || []).filter(matchesFilters);\n                if (filteredActions.length === 0 && (searchQuery || filterStatus || activeFilter !== 'ALL')) return null;\n                return { ...kr, actions: filteredActions };\n            }).filter(Boolean);\n\n            if (filteredKRs.length === 0 && (obj.keyResults || []).length > 0 && (searchQuery || filterStatus || activeFilter !== 'ALL')) return null;\n            return { ...obj, keyResults: filteredKRs };\n        }).filter(Boolean);\n\n        const rows = [];\n        filteredObjectives.forEach(obj => {\n            const objId = obj.id || obj._id;\n            rows.push({ type: 'OBJECTIVE', level: 0, id: objId, data: obj });\n            if (expandedRows[objId]) {\n                (obj.keyResults || []).forEach(kr => {\n                    const krId = kr.id || kr._id;\n                    rows.push({ type: 'KR', level: 1, id: krId, data: kr, parentId: objId });\n                    if (expandedRows[krId]) {\n                        (kr.actions || []).forEach(action => {\n                            rows.push({ type: 'ACTION', level: 2, id: action.id || action._id, data: action, parentId: krId });\n                        });\n                    }\n                });\n            }\n        });\n\n        return (\n            <div className=\"smartsheet-container mt-4\">\n                <table className=\"smartsheet-table\">\n                    <thead>\n                        <tr>\n                            <th className=\"row-index\">#</th>\n                            <th style={{ width: '25%' }}>Task / Objective Name</th>\n                            <th style={{ width: '20%' }}>Details</th>\n                            <th style={{ width: '10%' }}>Type</th>\n                            <th style={{ width: '10%' }}>Seller</th>\n                            <th style={{ width: '10%' }}>ASINs</th>\n                            <th className=\"text-center\">Progress</th>\n                            <th>Resource</th>\n                            <th className=\"text-center\">Priority</th>\n                            <th className=\"text-center\">Activity</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {rows.map((row, index) => {\n                            const isExpanded = expandedRows[row.id];\n                            const { data, level, type } = row;\n                            return (\n                                <tr key={row.id + '-' + type} className={`row-level-${level} ${type.toLowerCase()}-row`}>\n                                    <td className=\"row-index\">{index + 1}</td>\n                                    <td style={{ paddingLeft: `${12 + (level * 24)}px` }}>\n                                        <div className=\"d-flex align-items-center\">\n                                            {(type === 'OBJECTIVE' || type === 'KR') && (\n                                                <span onClick={() => toggleRow(row.id)}>\n                                                    <ChevronIcon expanded={isExpanded} />\n                                                </span>\n                                            )}\n                                            {type === 'ACTION' && <span className=\"me-2 opacity-25\"><div style={{ width: '10px' }}></div></span>}\n                                            <div className=\"d-flex align-items-center gap-2\">\n                                                {type === 'ACTION' && getStatusDot(data.status)}\n                                                <div className={`sm-task-title ${type !== 'ACTION' ? 'fw-bold' : ''}`}>\n                                                    {type === 'OBJECTIVE' && <span className=\"badge bg-primary-subtle text-primary border-primary-subtle me-2\" style={{ fontSize: '9px' }}>OBJ</span>}\n                                                    {type === 'KR' && <span className=\"badge bg-info-subtle text-info border-info-subtle me-2\" style={{ fontSize: '9px' }}>KR</span>}\n                                                    {data.title}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td>\n                                        <div className=\"text-muted small text-truncate\" style={{ maxWidth: '200px' }}>\n                                            {data.description || (type === 'OBJECTIVE' ? 'Strategic Goal' : type === 'KR' ? 'Key Metric' : '--')}\n                                        </div>\n                                    </td>\n                                    <td>\n                                        {type === 'ACTION' ? (\n                                            <span className=\"badge bg-secondary-subtle text-secondary border-secondary-subtle\" style={{ fontSize: '10px' }}>\n                                                {data.type?.replace('_', ' ')}\n                                            </span>\n                                        ) : '--'}\n                                    </td>\n                                    <td>\n                                        {type === 'ACTION' ? data.sellerId?.name || '--' : '--'}\n                                    </td>\n                                    <td>\n                                        {type === 'ACTION' ? (\n                                            <div className=\"d-flex flex-wrap gap-1\">\n                                                {data.asins?.slice(0, 2).map((asin, i) => (\n                                                    <span key={i} className=\"badge bg-light text-dark border\" style={{ fontSize: '9px' }}>\n                                                        {asin.asinCode || asin.asin || asin}\n                                                    </span>\n                                                ))}\n                                                {data.asins?.length > 2 && <span className=\"text-muted smallest\">+{data.asins.length - 2}</span>}\n                                            </div>\n                                        ) : '--'}\n                                    </td>\n                                    <td className=\"text-center\">\n                                        {type === 'ACTION' ? (\n                                            <span className=\"small fw-bold\" style={{ color: data.status === 'COMPLETED' ? '#198754' : '#6c757d' }}>\n                                                {data.status === 'COMPLETED' ? '100%' : data.status === 'IN_PROGRESS' ? '50%' : '0%'}\n                                            </span>\n                                        ) : (\n                                            <div className=\"d-flex align-items-center justify-content-center gap-2\">\n                                                <div className=\"progress\" style={{ height: '4px', width: '40px' }}>\n                                                    <div className=\"progress-bar\" style={{ width: `${type === 'OBJECTIVE' ? data.stats.progress : data.progress}%` }}></div>\n                                                </div>\n                                                <span className=\"small fw-bold\" style={{ fontSize: '10px' }}>\n                                                    {type === 'OBJECTIVE' ? data.stats.progress : data.progress}%\n                                                </span>\n                                            </div>\n                                        )}\n                                    </td>\n                                    <td>\n                                        <div className=\"d-flex align-items-center gap-2\">\n                                            <div className=\"avatar-initial bg-light text-dark border rounded-circle\" style={{ width: '20px', height: '20px', fontSize: '10px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold' }}>\n                                                {(data.assignedTo?.firstName || data.createdBy?.firstName || 'U').charAt(0)}\n                                            </div>\n                                            <div className=\"d-flex flex-column\">\n                                                <span className=\"fw-bold\" style={{ fontSize: '11px', color: '#374151' }}>\n                                                    {formatUserName(data.assignedTo) || 'Unassigned'}\n                                                </span>\n                                                {data.createdBy && data.assignedTo?._id !== data.createdBy?._id && (\n                                                    <span className=\"text-muted\" style={{ fontSize: '9px' }}>\n                                                        by {data.createdBy.firstName}\n                                                    </span>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td className=\"text-center\">\n                                        {type === 'ACTION' && renderPriorityIcon(data.priority)}\n                                    </td>\n                                    <td className=\"text-center\">\n                                        <div className=\"d-flex gap-2 justify-content-center\">\n                                            {type === 'ACTION' ? (\n                                                <>\n                                                    {(isOwnerOfItem(data, currentUser) || hasAdminPrivileges(currentUser)) && (\n                                                        <>\n                                                            {!isTaskCompleted(data) && !isTaskStarted(data) && data.status !== 'REVIEW' && (\n                                                                <button onClick={(e) => { e.stopPropagation(); handleStartTask(data); }} className=\"btn btn-sm btn-link p-0 text-primary\" title=\"Start Task\"><Play size={14} /></button>\n                                                            )}\n                                                            {!isTaskCompleted(data) && isTaskStarted(data) && data.status === 'IN_PROGRESS' && (\n                                                                <button onClick={(e) => { e.stopPropagation(); onSubmitForReview(data); }} className=\"btn btn-sm btn-link p-0 text-info\" title=\"Submit for Review\"><FileText size={14} /></button>\n                                                            )}\n                                                        </>\n                                                    )}\n                                                    {data.status === 'REVIEW' && hasAdminPrivileges(currentUser) && (\n                                                        <div className=\"d-flex gap-2\">\n                                                            <button\n                                                                onClick={(e) => { e.stopPropagation(); onReviewAction(data); }}\n                                                                className=\"btn btn-sm btn-link p-0 text-success\"\n                                                                title=\"Review Approval\"\n                                                            >\n                                                                <ThumbsUp size={14} />\n                                                            </button>\n                                                            <button\n                                                                onClick={(e) => { e.stopPropagation(); onReviewAction(data); }}\n                                                                className=\"btn btn-sm btn-link p-0 text-danger\"\n                                                                title=\"Review Rejection\"\n                                                            >\n                                                                <ThumbsDown size={14} />\n                                                            </button>\n                                                        </div>\n                                                    )}\n                                                    {(isOwnerOfItem(data, currentUser) || hasAdminPrivileges(currentUser)) && (\n                                                        <button onClick={(e) => { e.stopPropagation(); onEdit(data, 'ACTION'); }} className=\"btn btn-sm btn-link p-0 text-muted\" title=\"Edit Task\"><Edit2 size={14} /></button>\n                                                    )}\n                                                </>\n                                            ) : (\n                                                (isOwnerOfItem(data, currentUser) || hasAdminPrivileges(currentUser)) && (\n                                                    <button onClick={(e) => { e.stopPropagation(); onEdit(data, type); }} className=\"btn btn-sm btn-link p-0 text-muted\" title={`Edit ${type}`}><Edit2 size={14} /></button>\n                                                )\n                                            )}\n                                        </div>\n                                    </td>\n                                </tr>\n                            );\n                        })}\n                    </tbody>\n                </table>\n                {filteredObjectives.length === 0 && (\n                    <div className=\"text-center py-5 text-muted\">\n                        <Filter className=\"mb-2 opacity-25\" size={32} />\n                        <div style={{ fontSize: '13px' }}>No items found matching the current filters.</div>\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    const renderFlatTable = () => {\n        let flattenedActions = [];\n        objectives.forEach(obj => {\n            (obj.keyResults || []).forEach(kr => {\n                (kr.actions || []).forEach(action => {\n                    flattenedActions.push({ ...action, objectiveTitle: obj.title, krTitle: kr.title });\n                });\n            });\n        });\n\n        const filtered = flattenedActions.filter(matchesFilters);\n\n        return (\n            <div className=\"smartsheet-container mt-4\">\n                <table className=\"smartsheet-table\">\n                    <thead>\n                        <tr>\n                            <th className=\"row-index\">#</th>\n                            <th style={{ width: '30%' }}>Task Name</th>\n                            <th style={{ width: '15%' }}>Context</th>\n                            <th style={{ width: '10%' }}>Status</th>\n                            <th style={{ width: '10%' }}>Seller</th>\n                            <th style={{ width: '10%' }}>ASINs</th>\n                            <th className=\"text-center\">Timer</th>\n                            <th style={{ width: '12%' }}>Assignee</th>\n                            <th className=\"text-center\">Priority</th>\n                            <th className=\"text-center\">Activity</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {filtered.map((action, index) => (\n                            <tr key={action._id || action.id}>\n                                <td className=\"row-index\">{index + 1}</td>\n                                <td>\n                                    <div className=\"fw-bold\">{action.title}</div>\n                                    <div className=\"text-muted smallest text-truncate\">{action.description}</div>\n                                </td>\n                                <td>\n                                    <div className=\"smallest text-primary fw-bold text-uppercase\">{action.objectiveTitle}</div>\n                                    <div className=\"smallest text-muted\">{action.krTitle}</div>\n                                </td>\n                                <td>\n                                    <span className={`badge ${action.status === 'COMPLETED' ? 'bg-success-subtle text-success' :\n                                        action.status === 'IN_PROGRESS' ? 'bg-primary-subtle text-primary' :\n                                            action.status === 'REVIEW' ? 'bg-info-subtle text-info' :\n                                                'bg-warning-subtle text-warning-emphasis'\n                                        }`} style={{ fontSize: '10px' }}>\n                                        {action.status?.replace('_', ' ')}\n                                    </span>\n                                </td>\n                                <td className=\"small text-muted\">{action.sellerId?.name || '--'}</td>\n                                <td>\n                                    <div className=\"d-flex flex-wrap gap-1\">\n                                        {action.asins?.slice(0, 2).map((asin, i) => (\n                                            <span key={i} className=\"badge bg-light text-dark border\" style={{ fontSize: '9px' }}>\n                                                {asin.asinCode || asin.asin || asin}\n                                            </span>\n                                        ))}\n                                        {action.asins?.length > 2 && <span className=\"smallest text-muted\">+{action.asins.length - 2}</span>}\n                                    </div>\n                                </td>\n                                <td className=\"text-center\">\n                                    {isTaskStarted(action) ? `${timers[action._id || action.id] || 0}m` : '--'}\n                                </td>\n                                <td>\n                                    <div className=\"d-flex align-items-center gap-2\">\n                                        <div className=\"avatar-initial bg-light text-dark border rounded-circle\" style={{ width: '18px', height: '18px', fontSize: '9px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                                            {(action.assignedTo?.firstName || action.createdBy?.firstName || 'U').charAt(0)}\n                                        </div>\n                                        <div className=\"d-flex flex-column\">\n                                            <span className=\"small fw-bold\" style={{ fontSize: '10px', color: '#4b5563' }}>\n                                                {formatUserName(action.assignedTo) || 'Unassigned'}\n                                            </span>\n                                            {action.createdBy && action.assignedTo?._id !== action.createdBy?._id && (\n                                                <span className=\"text-muted\" style={{ fontSize: '8px' }}>\n                                                    by {action.createdBy.firstName}\n                                                </span>\n                                            )}\n                                        </div>\n                                    </div>\n                                </td>\n                                <td className=\"text-center\">{renderPriorityIcon(action.priority)}</td>\n                                <td className=\"text-center\">\n                                    <div className=\"d-flex gap-2 justify-content-center\">\n                                        {(isOwnerOfItem(action, currentUser) || hasAdminPrivileges(currentUser)) && (\n                                            <>\n                                                {!isTaskCompleted(action) && !isTaskStarted(action) && action.status !== 'REVIEW' && (\n                                                    <button onClick={(e) => { e.stopPropagation(); handleStartTask(action); }} className=\"btn btn-sm btn-link p-0 text-primary\" title=\"Start Task\"><Play size={14} /></button>\n                                                )}\n                                                {!isTaskCompleted(action) && isTaskStarted(action) && action.status === 'IN_PROGRESS' && (\n                                                    <button onClick={(e) => { e.stopPropagation(); onSubmitForReview(action); }} className=\"btn btn-sm btn-link p-0 text-info\" title=\"Submit for Review\"><FileText size={14} /></button>\n                                                )}\n                                            </>\n                                        )}\n                                        {action.status === 'REVIEW' && hasAdminPrivileges(currentUser) && (\n                                            <div className=\"d-flex gap-2\">\n                                                <button\n                                                    onClick={(e) => { e.stopPropagation(); onReviewAction(action); }}\n                                                    className=\"btn btn-sm btn-link p-0 text-success\"\n                                                    title=\"Review Approval\"\n                                                >\n                                                    <ThumbsUp size={14} />\n                                                </button>\n                                                <button\n                                                    onClick={(e) => { e.stopPropagation(); onReviewAction(action); }}\n                                                    className=\"btn btn-sm btn-link p-0 text-danger\"\n                                                    title=\"Review Rejection\"\n                                                >\n                                                    <ThumbsDown size={14} />\n                                                </button>\n                                            </div>\n                                        )}\n                                        {(isOwnerOfItem(action, currentUser) || hasAdminPrivileges(currentUser)) && (\n                                            <button onClick={(e) => { e.stopPropagation(); onEdit(action, 'ACTION'); }} className=\"btn btn-sm btn-link p-0 text-muted\" title=\"Edit Task\"><Edit2 size={14} /></button>\n                                        )}\n                                    </div>\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n                {filtered.length === 0 && (\n                    <div className=\"text-center py-5 text-muted\">\n                        <Filter className=\"mb-2 opacity-25\" size={32} />\n                        <div style={{ fontSize: '13px' }}>No tasks found matching the current filters.</div>\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"action-list-container\">\n            <div className=\"card mb-4 border-0 shadow-sm\" style={{ borderRadius: '16px' }}>\n                <div className=\"card-body\">\n                    <div className=\"row g-3\">\n                        <div className=\"col-md-6\">\n                            <div className=\"position-relative\">\n                                <Search className=\"position-absolute\" style={{ left: '12px', top: '50%', transform: 'translateY(-50%)', width: '16px', height: '16px', color: '#6b7280' }} />\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Search initiatives & tasks...\"\n                                    value={searchQuery}\n                                    onChange={(e) => onSearchChange && onSearchChange(e.target.value)}\n                                    className=\"form-control ps-5 border-0 bg-light\"\n                                    style={{ borderRadius: '10px' }}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"col-md-3\">\n                            <select\n                                value={filterStatus}\n                                onChange={(e) => setFilterStatus(e.target.value)}\n                                className=\"form-select border-0 bg-light\"\n                                style={{ borderRadius: '10px' }}\n                            >\n                                <option value=\"\">All Statuses</option>\n                                <option value=\"PENDING\">Pending</option>\n                                <option value=\"IN_PROGRESS\">In Progress</option>\n                                <option value=\"REVIEW\">Needs Review</option>\n                                <option value=\"COMPLETED\">Completed</option>\n                            </select>\n                        </div>\n                        <div className=\"col-md-3\">\n                            <select\n                                value={filterPriority}\n                                onChange={(e) => setFilterPriority(e.target.value)}\n                                className=\"form-select border-0 bg-light\"\n                                style={{ borderRadius: '10px' }}\n                            >\n                                <option value=\"\">All Priorities</option>\n                                <option value=\"LOW\">Low</option>\n                                <option value=\"MEDIUM\">Medium</option>\n                                <option value=\"HIGH\">High</option>\n                                <option value=\"URGENT\">Urgent</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {viewMode === 'STRATEGIC' ? renderTreeTable() : renderFlatTable()}\n        </div>\n    );\n};\n\nexport default ActionList;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2336, "column": 0}, "map": {"version":3,"sources":["file:///Users/jenilrupapara/Easysell%20Projects/GMS%20Report/gms-dashboard/src/components/actions/ActionChat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Send, User, Clock, CheckSquare } from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useSocket } from '../../contexts/SocketContext';\nimport api from '../../services/api';\n\nconst ActionChat = ({ actionId, messages: initialMessages = [], onSendMessage, users: propUsers = [], tasks = [], onNavigateToAction }) => {\n    const [messages, setMessages] = useState(initialMessages);\n    const [newMessage, setNewMessage] = useState('');\n    const [isSending, setIsSending] = useState(false);\n    const [mentionState, setMentionState] = useState({\n        isActive: false,\n        type: null, // 'USER' or 'TASK'\n        query: '',\n        index: -1 // Cursor position where mention started\n    });\n    const messagesEndRef = useRef(null);\n    const inputRef = useRef(null);\n    const { user: currentUser } = useAuth();\n    const socket = useSocket();\n\n    useEffect(() => {\n        setMessages(initialMessages);\n    }, [initialMessages]);\n\n    useEffect(() => {\n        if (!socket || !actionId) return;\n\n        const handleNewMessage = (message) => {\n            setMessages(prev => {\n                // Check for duplicates by checking ID or a temporary UUID if applicable\n                // Since our socket emits populated objects, _id should be present\n                const exists = prev.some(m => (m._id || m.id) === (message._id || message.id));\n                if (exists) return prev;\n                return [...prev, message];\n            });\n        };\n\n        socket.on(`action-message-${actionId}`, handleNewMessage);\n\n        return () => {\n            socket.off(`action-message-${actionId}`, handleNewMessage);\n        };\n    }, [socket, actionId]);\n\n    // ... scrollToBottom, users, useEffects ...\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    const [users, setUsers] = useState(propUsers || []);\n\n    useEffect(() => {\n        if (propUsers && propUsers.length > 0) {\n            setUsers(propUsers);\n        } else {\n            // Fetch users if not provided\n            const fetchUsers = async () => {\n                try {\n                    const response = await api.get('/users');\n                    if (response.data) {\n                        setUsers(response.data);\n                    }\n                } catch (error) {\n                    console.error('Failed to fetch users for chat:', error);\n                }\n            };\n            fetchUsers();\n        }\n    }, [propUsers]);\n\n    useEffect(() => {\n        scrollToBottom();\n    }, [messages]);\n\n    const handleInputChange = (e) => {\n        const val = e.target.value;\n        const cursorSafe = e.target.selectionStart || val.length;\n        setNewMessage(val);\n\n        // Check for Mention Trigger\n        const textBeforeCursor = val.slice(0, cursorSafe);\n        const lastWord = textBeforeCursor.split(' ').pop();\n\n        if (lastWord.startsWith('@')) {\n            setMentionState({\n                isActive: true,\n                type: 'USER',\n                query: lastWord.slice(1),\n                index: cursorSafe - lastWord.length\n            });\n        } else if (lastWord.startsWith('#')) {\n            setMentionState({\n                isActive: true,\n                type: 'TASK',\n                query: lastWord.slice(1),\n                index: cursorSafe - lastWord.length\n            });\n        } else {\n            setMentionState({ isActive: false, type: null, query: '', index: -1 });\n        }\n    };\n\n    const handleSelectMention = (item) => {\n        if (!mentionState.isActive) return;\n\n        const val = newMessage;\n        const beforeMention = val.slice(0, mentionState.index);\n        const restOfString = val.slice(mentionState.index + mentionState.query.length + 1);\n\n        let insertText = '';\n        if (mentionState.type === 'USER') {\n            insertText = `@${item.name} `;\n        } else {\n            // Use structured format for Tasks: #[Title](task:ID)\n            insertText = `#[${item.title.substring(0, 30)}...](task:${item._id || item.id}) `;\n        }\n\n        setNewMessage(beforeMention + insertText + restOfString);\n        setMentionState({ isActive: false, type: null, query: '', index: -1 });\n        inputRef.current?.focus();\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!newMessage.trim() || isSending) return;\n\n        setIsSending(true);\n        try {\n            await onSendMessage(newMessage);\n            setNewMessage('');\n            setMentionState({ isActive: false, type: null, query: '', index: -1 });\n        } catch (error) {\n            console.error('Failed to send message:', error);\n        } finally {\n            setIsSending(false);\n        }\n    };\n\n    const formatTime = (dateString) => {\n        if (!dateString) return '';\n        const date = new Date(dateString);\n        return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    };\n\n    const formatDate = (dateString) => {\n        if (!dateString) return '';\n        const date = new Date(dateString);\n        const today = new Date();\n        const yesterday = new Date(today);\n        yesterday.setDate(yesterday.getDate() - 1);\n\n        if (date.toDateString() === today.toDateString()) {\n            return 'Today';\n        } else if (date.toDateString() === yesterday.toDateString()) {\n            return 'Yesterday';\n        }\n        return date.toLocaleDateString();\n    };\n\n    // Filter Items for Mention\n    const filteredUsers = mentionState.isActive && mentionState.type === 'USER' && Array.isArray(users)\n        ? users.filter(u => {\n            const name = u.firstName ? `${u.firstName} ${u.lastName}` : (u.name || u.email);\n            return name.toLowerCase().includes(mentionState.query.toLowerCase());\n        })\n        : [];\n\n    const filteredTasks = mentionState.isActive && mentionState.type === 'TASK' && Array.isArray(tasks)\n        ? tasks.filter(t => t.title?.toLowerCase().includes(mentionState.query.toLowerCase()) && (t._id || t.id) !== actionId)\n        : [];\n\n    // Group messages by date\n    const groupedMessages = messages.reduce((groups, message) => {\n        const date = formatDate(message.createdAt);\n        if (!groups[date]) {\n            groups[date] = [];\n        }\n        groups[date].push(message);\n        return groups;\n    }, {});\n\n    // Regex to parse:\n    // 1. Mentions: @Name\n    // 2. Structured Tasks: #[Title...](task:ID)\n    // 3. Simple Tasks (Legacy): #TaskName\n    const parseMessageContent = (content) => {\n        // Regex for structured task: #\\[(.*?)\\]\\(task:(.*?)\\)\n        // Regex for simple task/mention: (@\\w+|#.+?)(?=\\s|$) ... needs to be careful not to break structured ones\n\n        // We can split by the complex regex first, then process chunks\n        const parts = [];\n        let lastIndex = 0;\n\n        // Match standard format: #[Title](task:ID)\n        const taskRegex = /#\\[(.*?)\\]\\(task:(.*?)\\)/g;\n        let match;\n\n        while ((match = taskRegex.exec(content)) !== null) {\n            // Push text before match\n            if (match.index > lastIndex) {\n                const text = content.substring(lastIndex, match.index);\n                // Process text for simple mentions\n                parts.push(...parseSimpleMentions(text));\n            }\n\n            const taskId = match[2]; // Capture ID for closure\n\n            // Push the task link\n            parts.push(\n                <button\n                    key={`task-${match.index}`}\n                    className=\"btn btn-link p-0 text-info fw-bold text-decoration-none align-baseline\"\n                    style={{ fontSize: 'inherit' }}\n                    onClick={() => onNavigateToAction && onNavigateToAction(taskId)}\n                >\n                    #{match[1]}\n                </button>\n            );\n\n            lastIndex = taskRegex.lastIndex;\n        }\n\n        // Push remaining text\n        if (lastIndex < content.length) {\n            parts.push(...parseSimpleMentions(content.substring(lastIndex)));\n        }\n\n        return parts;\n    };\n\n    const parseSimpleMentions = (text) => {\n        // Split by @mention or legacy #hashtag (not followed by [)\n        // Use a simpler approach: split by space and check words? Or regex split?\n        // Regex split keeps delimiters: \n        return text.split(/(@\\w+|#\\w+)(?=\\s|$|[.,!])/g).map((part, i) => {\n            if (part.startsWith('@')) return <span key={i} className=\"text-primary fw-bold\">{part}</span>;\n            if (part.startsWith('#')) return <span key={i} className=\"text-info fw-bold\">{part}</span>;\n            return part;\n        });\n    };\n\n    return (\n        <div className=\"chat-container position-relative\">\n            <div className=\"chat-messages-area\">\n                {messages.length === 0 ? (\n                    <div className=\"text-center text-muted py-5\">\n                        <div className=\"mb-3\">\n                            <i className=\"bi bi-chat-dots\" style={{ fontSize: '2rem', color: '#cbd5e1' }}></i>\n                        </div>\n                        <p className=\"mb-0\">No messages yet. Start the conversation!</p>\n                    </div>\n                ) : (\n                    Object.entries(groupedMessages).map(([date, dateMessages]) => (\n                        <div key={date}>\n                            <div className=\"chat-date-separator\">\n                                <span>{date}</span>\n                            </div>\n                            {dateMessages.map((msg, index) => {\n                                const isMe = msg.sender?._id === currentUser?._id || msg.sender?.id === currentUser?.id;\n                                const senderName = msg.sender?.firstName ? `${msg.sender.firstName} ${msg.sender.lastName}` : (msg.sender?.name || 'User');\n\n                                return (\n                                    <div\n                                        key={msg._id || index}\n                                        className={`d-flex mb-3 ${isMe ? 'justify-content-end' : 'justify-content-start'}`}\n                                    >\n                                        {!isMe && (\n                                            <div className=\"me-2\">\n                                                {msg.sender?.avatar ? (\n                                                    <img\n                                                        src={msg.sender.avatar}\n                                                        alt={senderName}\n                                                        className=\"chat-avatar rounded-circle\"\n                                                        style={{ width: '32px', height: '32px', objectFit: 'cover' }}\n                                                    />\n                                                ) : (\n                                                    <div className=\"chat-avatar\">\n                                                        {senderName.charAt(0).toUpperCase()}\n                                                    </div>\n                                                )}\n                                            </div>\n                                        )}\n                                        <div className={`message-bubble ${isMe ? 'sent' : 'received'}`}>\n                                            {!isMe && (\n                                                <div className=\"fw-bold mb-1\" style={{ fontSize: '0.75rem', color: '#64748B' }}>\n                                                    {senderName}\n                                                </div>\n                                            )}\n                                            <div style={{ whiteSpace: 'pre-wrap', fontSize: '0.9rem' }}>\n                                                {parseMessageContent(msg.content)}\n                                            </div>\n\n                                            {msg.actionId && (\n                                                <div className=\"mt-2 p-2 bg-white border rounded shadow-sm d-flex align-items-center gap-2 cursor-pointer hover-bg-light\"\n                                                    onClick={() => {\n                                                        const taskId = typeof msg.actionId === 'object' ? msg.actionId._id : msg.actionId;\n                                                        onNavigateToAction && onNavigateToAction(taskId);\n                                                    }}\n                                                    style={{ borderLeft: '3px solid var(--bs-primary)' }}\n                                                >\n                                                    <div className=\"p-2 bg-primary-subtle text-primary rounded\">\n                                                        <CheckSquare size={16} />\n                                                    </div>\n                                                    <div className=\"flex-grow-1 min-w-0\">\n                                                        <div className=\"small fw-bold text-dark text-truncate\">\n                                                            {tasks?.find(t => (t._id || t.id) === (msg.actionId._id || msg.actionId))?.title || 'Related Task'}\n                                                        </div>\n                                                        <div className=\"text-muted\" style={{ fontSize: '0.7rem' }}>Click to view details</div>\n                                                    </div>\n                                                </div>\n                                            )}\n\n                                            <div className={`message-info ${isMe ? 'text-light-50' : 'text-muted'}`}>\n                                                {formatTime(msg.createdAt)}\n                                            </div>\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    ))\n                )}\n                <div ref={messagesEndRef} />\n            </div>\n\n\n            {/* Mention Popup */}\n            {mentionState.isActive && (\n                <div className=\"mention-popup card shadow-sm position-absolute\" style={{ bottom: '80px', left: '20px', width: '250px', maxHeight: '200px', overflowY: 'auto', zIndex: 1000 }}>\n                    <div className=\"list-group list-group-flush\">\n                        {mentionState.type === 'USER' && filteredUsers.map(user => {\n                            const displayName = user.firstName ? `${user.firstName} ${user.lastName}` : (user.name || user.email);\n                            return (\n                                <button\n                                    key={user._id || user.id}\n                                    className=\"list-group-item list-group-item-action d-flex align-items-center gap-2\"\n                                    onClick={() => handleSelectMention({ ...user, name: displayName })}\n                                >\n                                    {user.avatar ? (\n                                        <img\n                                            src={user.avatar}\n                                            alt={displayName}\n                                            className=\"rounded-circle\"\n                                            style={{ width: '24px', height: '24px', objectFit: 'cover' }}\n                                        />\n                                    ) : (\n                                        <div className=\"chat-avatar\" style={{ width: '24px', height: '24px', fontSize: '0.7rem' }}>\n                                            {displayName.charAt(0).toUpperCase()}\n                                        </div>\n                                    )}\n                                    <span>{displayName}</span>\n                                </button>\n                            );\n                        })}\n                        {mentionState.type === 'TASK' && filteredTasks.map(task => (\n                            <button\n                                key={task._id || task.id}\n                                className=\"list-group-item list-group-item-action d-flex align-items-center gap-2\"\n                                onClick={() => handleSelectMention(task)}\n                            >\n                                <span className=\"badge bg-light text-dark border\">\n                                    <CheckSquare size={12} />\n                                </span>\n                                <span className=\"text-truncate\" style={{ maxWidth: '180px' }}>{task.title}</span>\n                            </button>\n                        ))}\n                        {(mentionState.type === 'USER' && filteredUsers.length === 0) && (\n                            <div className=\"p-2 text-center text-muted small\">No users found</div>\n                        )}\n                        {(mentionState.type === 'TASK' && filteredTasks.length === 0) && (\n                            <div className=\"p-2 text-center text-muted small\">No tasks found</div>\n                        )}\n                    </div>\n                </div>\n            )}\n\n            <div className=\"chat-input-area\">\n                <div className=\"d-flex gap-2 mb-2\">\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-sm btn-outline-secondary rounded-pill px-3\"\n                        onClick={() => {\n                            setNewMessage(prev => prev + (prev.endsWith(' ') ? '@' : ' @'));\n                            setMentionState({ isActive: true, type: 'USER', query: '', index: newMessage.length + (newMessage.endsWith(' ') ? 1 : 2) });\n                            inputRef.current?.focus();\n                        }}\n                        title=\"Mention User\"\n                    >\n                        @ Mention\n                    </button>\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-sm btn-outline-secondary rounded-pill px-3\"\n                        onClick={() => {\n                            setNewMessage(prev => prev + (prev.endsWith(' ') ? '#' : ' #'));\n                            setMentionState({ isActive: true, type: 'TASK', query: '', index: newMessage.length + (newMessage.endsWith(' ') ? 1 : 2) });\n                            inputRef.current?.focus();\n                        }}\n                        title=\"Link Task\"\n                    >\n                        # Task\n                    </button>\n                </div>\n                <form onSubmit={handleSubmit} className=\"d-flex gap-2\">\n                    <input\n                        ref={inputRef}\n                        type=\"text\"\n                        className=\"form-control-custom\"\n                        placeholder=\"Type a message... Use @ to mention, # to link task\"\n                        value={newMessage}\n                        onChange={handleInputChange}\n                        disabled={isSending}\n                        autoComplete=\"off\"\n                    />\n                    <button\n                        type=\"submit\"\n                        className=\"btn btn-primary d-flex align-items-center justify-content-center\"\n                        disabled={!newMessage.trim() || isSending}\n                        style={{ minWidth: '48px', height: '42px', borderRadius: '8px' }}\n                    >\n                        {isSending ? (\n                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                        ) : (\n                            <Send style={{ width: '18px', height: '18px' }} />\n                        )}\n                    </button>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default ActionChat;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3097, "column": 0}, "map": {"version":3,"sources":["file:///Users/jenilrupapara/Easysell%20Projects/GMS%20Report/gms-dashboard/src/components/actions/ActionModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { X, Save, Calendar, User, Tag, AlertCircle, CheckCircle, ThumbsUp, ThumbsDown } from 'lucide-react';\nimport ActionChat from './ActionChat';\nimport { db } from '../../services/db';\nimport './ActionModal.css';\n\nconst ActionModal = ({ action, isOpen, onClose, onSave, asins = [], users = [], actions = [], onNavigateToAction, initialKeyResultId = null }) => {\n    const [messages, setMessages] = useState([]);\n    const [templates, setTemplates] = useState([]);\n    const [selectedTemplate, setSelectedTemplate] = useState('');\n    const [activeTab, setActiveTab] = useState('details');\n\n    // ... (rest of the state and handlers remain the same) ...\n    // RESTORED FORM STATE\n    const [formData, setFormData] = useState({\n        title: '',\n        description: '',\n        type: 'TITLE_OPTIMIZATION',\n        priority: 'MEDIUM',\n        status: 'PENDING',\n        asins: [],\n        assignedTo: '',\n        startDate: '',\n        deadline: '',\n        keyResultId: initialKeyResultId || '',\n    });\n\n    // Fetch templates\n    useEffect(() => {\n        const fetchTemplates = async () => {\n            try {\n                const res = await db.getTaskTemplates();\n                if (res && res.success && Array.isArray(res.data)) {\n                    setTemplates(res.data);\n                } else if (Array.isArray(res)) {\n                    setTemplates(res);\n                } else {\n                    console.error(\"Invalid templates data format:\", res);\n                    setTemplates([]);\n                }\n            } catch (err) {\n                console.error(\"Failed to fetch templates:\", err);\n                setTemplates([]);\n            }\n        };\n        if (isOpen) fetchTemplates();\n    }, [isOpen]);\n\n    // RESTORED EFFECT FOR FORM DATA SYNC\n    useEffect(() => {\n        if (action) {\n            setFormData({\n                title: action.title || '',\n                description: action.description || '',\n                type: action.type || 'TITLE_OPTIMIZATION',\n                priority: action.priority || 'MEDIUM',\n                status: action.status || 'PENDING',\n                asins: action.asins?.map(a => a._id || a) || [],\n                assignedTo: action.assignedTo?._id || action.assignedTo || action.assignee || '',\n                startDate: (action.timeTracking?.startDate || action.startDate) ? new Date(action.timeTracking?.startDate || action.startDate).toISOString().split('T')[0] : '',\n                deadline: (action.timeTracking?.deadline || action.deadline || action.dueDate) ? new Date(action.timeTracking?.deadline || action.deadline || action.dueDate).toISOString().split('T')[0] : '',\n                recurring: action.recurring || { enabled: false, frequency: 'WEEKLY', daysOfWeek: [] },\n                keyResultId: action.keyResultId || initialKeyResultId || ''\n            });\n        } else {\n            setFormData({\n                title: '',\n                description: '',\n                type: 'TITLE_OPTIMIZATION',\n                priority: 'MEDIUM',\n                status: 'PENDING',\n                asins: [],\n                assignedTo: '',\n                startDate: '',\n                deadline: '',\n                recurring: { enabled: false, frequency: 'WEEKLY', daysOfWeek: [] },\n                keyResultId: initialKeyResultId || ''\n            });\n        }\n        setSelectedTemplate('');\n    }, [action, isOpen, initialKeyResultId]);\n\n    // Handle Template Change\n    const handleTemplateChange = (templateId) => {\n        setSelectedTemplate(templateId);\n        if (!templateId) return;\n\n        const template = templates.find(t => (t._id || t.id) === templateId);\n        if (template) {\n            setFormData(prev => ({\n                ...prev,\n                title: template.title,\n                description: template.description,\n                type: template.type,\n                priority: template.priority || prev.priority\n            }));\n        }\n    };\n\n    // RESTORED HANDLERS\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        const submissionData = {\n            ...formData,\n            _id: action?._id,\n            timeTracking: {\n                ...action?.timeTracking,\n                startDate: formData.startDate,\n                deadline: formData.deadline\n            }\n        };\n        onSave(submissionData);\n    };\n\n    useEffect(() => {\n        if (action?.messages) {\n            setMessages(action.messages);\n        } else {\n            setMessages([]);\n        }\n    }, [action]);\n\n    const handleSendMessage = async (content) => {\n        try {\n            const result = await db.addMessage(action._id || action.id, content);\n\n            if (result.success) {\n                const newMessage = result.data;\n                setMessages(prev => [...prev, newMessage]);\n            }\n        } catch (error) {\n            console.error(\"Failed to send message\", error);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"modal-overlay\" onClick={onClose}>\n            <div className=\"modal-dialog modal-xl\" onClick={(e) => e.stopPropagation()}>\n                <div className=\"modal-content action-modal-content border-0\">\n                    <div className=\"action-modal-header py-3 px-4 bg-white border-bottom\">\n                        <div className=\"action-header-info\">\n                            <div className={`p-2 rounded-3 bg-soft-${formData.priority === 'HIGH' || formData.priority === 'URGENT' ? 'danger' : 'primary'}`}>\n                                <Tag size={24} className={formData.priority === 'HIGH' || formData.priority === 'URGENT' ? 'text-danger' : 'text-primary'} />\n                            </div>\n                            <div>\n                                <h1 className=\"action-modal-title\">{action ? formData.title : 'New Task'}</h1>\n                                <div className=\"d-flex align-items-center gap-2 mt-1\">\n                                    <span className={`badge ${formData.status === 'COMPLETED' ? 'bg-success' : 'bg-primary'} rounded-pill px-3`}>\n                                        {formData.status.replace('_', ' ')}\n                                    </span>\n                                    <span className=\"text-muted small\">â€¢ Created {action ? new Date(action.createdAt).toLocaleDateString() : 'Just now'}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <button type=\"button\" className=\"btn btn-icon btn-light rounded-circle shadow-sm\" onClick={onClose}>\n                            <X size={20} />\n                        </button>\n                    </div>\n\n                    {action && (\n                        <div className=\"action-modal-tabs px-4\">\n                            <button\n                                className={`action-tab-btn ${activeTab === 'details' ? 'active' : ''}`}\n                                onClick={() => setActiveTab('details')}\n                            >\n                                Task Overview\n                            </button>\n                            <button\n                                className={`action-tab-btn ${activeTab === 'chat' ? 'active' : ''}`}\n                                onClick={() => setActiveTab('chat')}\n                            >\n                                Discussion & Activity\n                                {messages.length > 0 && <span className=\"ms-2 badge bg-soft-primary text-primary rounded-pill\">{messages.length}</span>}\n                            </button>\n                        </div>\n                    )}\n\n                    <div className=\"action-modal-body bg-light\">\n                        {activeTab === 'details' ? (\n                            <form onSubmit={handleSubmit} className=\"action-two-column-layout\">\n                                {/* Left Column: Core Content */}\n                                <div className=\"action-main-content\">\n                                    <div className=\"action-card\">\n                                        <h3 className=\"action-card-title\">General Information</h3>\n                                        <div className=\"mb-4\">\n                                            <label className=\"form-label-clean\">Task Title</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"title\"\n                                                value={formData.title}\n                                                onChange={handleChange}\n                                                required\n                                                className=\"form-input-clean fw-bold text-dark\"\n                                                placeholder=\"What needs to be done?\"\n                                            />\n                                        </div>\n                                        <div className=\"mb-0\">\n                                            <label className=\"form-label-clean\">Description & Instructions</label>\n                                            <textarea\n                                                name=\"description\"\n                                                value={formData.description}\n                                                onChange={handleChange}\n                                                rows=\"8\"\n                                                className=\"form-input-clean\"\n                                                placeholder=\"Provide detailed instructions or context for this task...\"\n                                            />\n                                        </div>\n\n                                        {/* Completion Info */}\n                                        {action?.completion?.remarks && (\n                                            <div className=\"mt-4 p-3 bg-soft-success rounded-3 border border-success border-opacity-10\">\n                                                <h4 className=\"small fw-bold text-success mb-2 d-flex align-items-center gap-2\">\n                                                    <CheckCircle size={14} /> COMPLETION REMARKS\n                                                </h4>\n                                                <p className=\"small text-dark mb-2\" style={{ whiteSpace: 'pre-wrap' }}>\n                                                    {action.completion.remarks}\n                                                </p>\n                                                {action.completion.completedBy && (\n                                                    <div className=\"smallest text-muted\">\n                                                        By {action.completion.completedBy.firstName} {action.completion.completedBy.lastName} on {new Date(action.completion.completedAt).toLocaleString()}\n                                                    </div>\n                                                )}\n                                                {action.completion.audioTranscript && (\n                                                    <div className=\"mt-2 pt-2 border-top border-success border-opacity-10\">\n                                                        <div className=\"smallest fw-bold text-success text-uppercase mb-1\">Audio Transcript</div>\n                                                        <p className=\"smallest text-muted italic\">\"{action.completion.audioTranscript}\"</p>\n                                                    </div>\n                                                )}\n                                            </div>\n                                        )}\n\n                                        {/* Review Info */}\n                                        {action?.review?.comments && action.review.status !== 'PENDING' && (\n                                            <div className={`mt-3 p-3 rounded-3 border ${action.review.status === 'APPROVED' ? 'bg-soft-info border-info' : 'bg-soft-danger border-danger'} border-opacity-10`}>\n                                                <h4 className={`small fw-bold mb-2 d-flex align-items-center gap-2 ${action.review.status === 'APPROVED' ? 'text-info' : 'text-danger'}`}>\n                                                    {action.review.status === 'APPROVED' ? <ThumbsUp size={14} /> : <ThumbsDown size={14} />}\n                                                    REVIEWER FEEDBACK ({action.review.status})\n                                                </h4>\n                                                <p className=\"small text-dark mb-2\" style={{ whiteSpace: 'pre-wrap' }}>\n                                                    {action.review.comments}\n                                                </p>\n                                                {action.review.reviewedBy && (\n                                                    <div className=\"smallest text-muted\">\n                                                        By {action.review.reviewedBy.firstName || 'Reviewer'} on {new Date(action.review.reviewedAt).toLocaleString()}\n                                                    </div>\n                                                )}\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    {/* ASIN Selection / Display */}\n                                    <div className=\"action-card\">\n                                        <h3 className=\"action-card-title\">Related ASINs / Products ({formData.asins?.length || 0})</h3>\n                                        <div className=\"d-flex flex-column gap-2 mb-3\">\n                                            {formData.asins?.map(asinId => {\n                                                const asinData = asins.find(a => (a.id || a._id) === asinId);\n                                                if (!asinData) return null;\n                                                return (\n                                                    <div key={asinId} className=\"asin-info-card shadow-sm border\">\n                                                        <div className=\"asin-thumb bg-white fw-bold\">\n                                                            {asinData.asin || 'ASIN'}\n                                                        </div>\n                                                        <div className=\"flex-grow-1 overflow-hidden\">\n                                                            <div className=\"fw-bold text-dark text-truncate\">\n                                                                {asinData.title || asinData.productName || 'Unknown Product'}\n                                                            </div>\n                                                            <div className=\"small text-muted mt-1 d-flex gap-2\">\n                                                                <span>{asinData.asinCode}</span>\n                                                                <span>â€¢ {asinData.marketplace || 'N/A'}</span>\n                                                            </div>\n                                                        </div>\n                                                        <button\n                                                            type=\"button\"\n                                                            className=\"btn btn-sm btn-outline-danger border-0 h-fit\"\n                                                            onClick={() => setFormData({ ...formData, asins: formData.asins.filter(id => id !== asinId) })}\n                                                        >\n                                                            <X size={14} />\n                                                        </button>\n                                                    </div>\n                                                );\n                                            })}\n                                        </div>\n\n                                        <div className=\"mb-0\">\n                                            <select\n                                                name=\"asin-adder\"\n                                                value=\"\"\n                                                onChange={(e) => {\n                                                    const val = e.target.value;\n                                                    if (val && formData.asins && !formData.asins.includes(val)) {\n                                                        setFormData({ ...formData, asins: [...formData.asins, val] });\n                                                    }\n                                                }}\n                                                className=\"form-input-clean\"\n                                            >\n                                                <option value=\"\">Add Product to Task...</option>\n                                                {asins\n                                                    .filter(a => formData.asins && !formData.asins.includes(a.id || a._id))\n                                                    .map(a => (\n                                                        <option key={a.id || a._id} value={a.id || a._id}>\n                                                            {a.asin || a.asinCode} - {(a.title || a.productName || 'Unknown Product').substring(0, 50)}...\n                                                        </option>\n                                                    ))\n                                                }\n                                            </select>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Right Column: Sidebar Metadata */}\n                                <div className=\"action-sidebar\">\n                                    <div className=\"action-card p-3\">\n                                        <h3 className=\"action-card-title\">Task Controls</h3>\n\n                                        <div className=\"mb-4\">\n                                            <label className=\"form-label-clean\">Current Status</label>\n                                            <select name=\"status\" value={formData.status} onChange={handleChange} className=\"form-input-clean bg-soft-primary border-primary border-opacity-25 fw-bold text-primary\">\n                                                <option value=\"PENDING\">Pending</option>\n                                                <option value=\"IN_PROGRESS\">In Progress</option>\n                                                <option value=\"REVIEW\">Needs Review</option>\n                                                <option value=\"COMPLETED\">Completed</option>\n                                                <option value=\"CANCELLED\">Cancelled</option>\n                                            </select>\n                                        </div>\n\n                                        <div className=\"mb-4\">\n                                            <label className=\"form-label-clean\">Priority</label>\n                                            <div className=\"d-flex gap-2\">\n                                                {['LOW', 'MEDIUM', 'HIGH', 'URGENT'].map(p => (\n                                                    <button\n                                                        key={p}\n                                                        type=\"button\"\n                                                        onClick={() => setFormData({ ...formData, priority: p })}\n                                                        className={`btn btn-sm flex-grow-1 border-2 py-1 px-0 small fw-bold ${formData.priority === p ? 'btn-primary' : 'btn-outline-light text-muted'}`}\n                                                    >\n                                                        {p[0]}\n                                                    </button>\n                                                ))}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"mb-4\">\n                                            <label className=\"form-label-clean\">Assigned To</label>\n                                            <select name=\"assignedTo\" value={formData.assignedTo} onChange={handleChange} className=\"form-input-clean\">\n                                                <option value=\"\">Unassigned</option>\n                                                {users.map(u => (\n                                                    <option key={u.id || u._id} value={u.id || u._id}>\n                                                        {u.firstName ? `${u.firstName} ${u.lastName}` : (u.name || u.email)}\n                                                    </option>\n                                                ))}\n                                            </select>\n                                        </div>\n\n                                        <hr className=\"my-4 opacity-50\" />\n\n                                        <div className=\"mb-3\">\n                                            <label className=\"form-label-clean\"><Calendar size={14} className=\"me-2\" /> Start Date</label>\n                                            <input type=\"date\" name=\"startDate\" value={formData.startDate} onChange={handleChange} className=\"form-input-clean small\" />\n                                        </div>\n\n                                        <div className=\"mb-4\">\n                                            <label className=\"form-label-clean\"><Calendar size={14} className=\"me-2 text-danger\" /> Deadline</label>\n                                            <input type=\"date\" name=\"deadline\" value={formData.deadline} onChange={handleChange} className=\"form-input-clean small border-danger border-opacity-25\" />\n                                        </div>\n\n                                        <button type=\"submit\" className=\"btn btn-primary w-100 py-2 fw-bold d-flex align-items-center justify-content-center gap-2\">\n                                            <Save size={18} />\n                                            {action ? 'Update Task' : 'Create Task'}\n                                        </button>\n                                    </div>\n\n                                    {/* Task Type Summary */}\n                                    <div className=\"action-card bg-soft-info border-0 p-3\">\n                                        <div className=\"d-flex align-items-center gap-2 text-info mb-2 fw-bold small\">\n                                            <AlertCircle size={14} />\n                                            TASK CLASSIFICATION\n                                        </div>\n                                        <select name=\"type\" value={formData.type} onChange={handleChange} className=\"form-select border-0 bg-transparent fw-bold text-dark p-0\" style={{ boxShadow: 'none' }}>\n                                            {/* (options remain as before but cleaner UI context) */}\n                                            <option value=\"TITLE_OPTIMIZATION\">Title Optimization</option>\n                                            <option value=\"DESCRIPTION_OPTIMIZATION\">Description Optimization</option>\n                                            <option value=\"IMAGE_OPTIMIZATION\">Image Optimization</option>\n                                            <option value=\"BULLET_POINTS\">Bullet Points</option>\n                                            <option value=\"A_PLUS_CONTENT\">A+ Content</option>\n                                            <option value=\"GENERAL_OPTIMIZATION\">General Optimization</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </form>\n                        ) : (\n                            <div className=\"h-100 bg-white shadow-inner\">\n                                <ActionChat\n                                    actionId={action._id || action.id}\n                                    messages={messages}\n                                    onSendMessage={handleSendMessage}\n                                    users={users}\n                                    tasks={actions}\n                                    onNavigateToAction={onNavigateToAction}\n                                />\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n            <style>{`\n                .modal-xl { max-width: 1140px; }\n                .bg-soft-primary { background-color: #eef2ff; }\n                .bg-soft-danger { background-color: #fef2f2; }\n                .bg-soft-info { background-color: #f0f9ff; }\n                .text-primary { color: #4f46e5 !important; }\n                .text-danger { color: #ef4444 !important; }\n                .text-info { color: #0891b2 !important; }\n                .h-fit { height: fit-content; }\n            `}</style>\n        </div>\n    );\n};\n\nexport default ActionModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4256, "column": 0}, "map": {"version":3,"sources":["file:///Users/jenilrupapara/Easysell%20Projects/GMS%20Report/gms-dashboard/src/components/actions/ObjectiveManager.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Plus, X, Check, Calendar, Sparkles, Loader2 } from 'lucide-react';\nimport { db } from '../../services/db';\n\n\nconst ObjectiveManager = ({ onObjectiveCreated, onClose, objective, users = [] }) => {\n    const [step, setStep] = useState(1); // 1: Info, 2: Template, 3: Tasks/Asins\n    const [title, setTitle] = useState(objective?.title || '');\n    const [owner, setOwner] = useState(objective?.owner?._id || objective?.owner || '');\n    const [defaultAssignee, setDefaultAssignee] = useState('');\n    const [baseTitle, setBaseTitle] = useState(objective?.title || '');\n    const [type, setType] = useState(objective?.type || 'MONTHLY');\n    const [startDate, setStartDate] = useState(objective?.startDate ? new Date(objective.startDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]);\n    const [endDate, setEndDate] = useState(objective?.endDate ? new Date(objective.endDate).toISOString().split('T')[0] : '');\n    const [sellers, setSellers] = useState([]);\n    const [selectedSeller, setSelectedSeller] = useState(objective?.sellerId || '');\n    const [loading, setLoading] = useState(false);\n    const [createdObjective, setCreatedObjective] = useState(objective || null);\n    const [templates, setTemplates] = useState([]);\n    const [selectedTemplates, setSelectedTemplates] = useState([]);\n    const [availableAsins, setAvailableAsins] = useState([]);\n    const [selectedAsins, setSelectedAsins] = useState([]);\n\n    // Auto-calculate end date based on type\n    useEffect(() => {\n        if (!startDate) return;\n        const start = new Date(startDate);\n        const end = new Date(start);\n\n        if (type === 'MONTHLY') {\n            end.setMonth(end.getMonth() + 1);\n        } else if (type === 'WEEKLY') {\n            end.setDate(end.getDate() + 7);\n        } else if (type === 'QUARTERLY') {\n            end.setMonth(end.getMonth() + 3);\n        }\n\n        setEndDate(end.toISOString().split('T')[0]);\n    }, [startDate, type]);\n\n    const handleAddKR = () => {\n        setManualKRs([...manualKRs, { title: '', metric: 'Tasks Completed', targetValue: 100, unit: '%' }]);\n    };\n\n    const handleRemoveKR = (index) => {\n        const newKRs = [...manualKRs];\n        newKRs.splice(index, 1);\n        setManualKRs(newKRs);\n    };\n\n    const handleKRChange = (index, field, value) => {\n        const newKRs = [...manualKRs];\n        newKRs[index][field] = value;\n        setManualKRs(newKRs);\n    };\n\n    // Fetch sellers and templates\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const sRes = await db.getSellers();\n                if (sRes && Array.isArray(sRes.sellers)) setSellers(sRes.sellers);\n                else if (Array.isArray(sRes)) setSellers(sRes);\n\n                const tRes = await db.getTaskTemplates();\n                if (tRes && Array.isArray(tRes.data)) setTemplates(tRes.data);\n                else if (Array.isArray(tRes)) setTemplates(tRes);\n            } catch (err) {\n                console.error(\"Failed to fetch initial data:\", err);\n            }\n        };\n        fetchData();\n    }, []);\n\n    // Fetch ASINs when seller is selected or in step 3\n    useEffect(() => {\n        if (!selectedSeller) return;\n        const fetchAsins = async () => {\n            try {\n                const res = await db.getAsins({ sellerId: selectedSeller });\n                if (res && Array.isArray(res.asins)) setAvailableAsins(res.asins);\n            } catch (err) {\n                console.error(\"Failed to fetch ASINs:\", err);\n            }\n        };\n        fetchAsins();\n    }, [selectedSeller]);\n\n    // Fetch sellers on load\n    useEffect(() => {\n        const fetchSellers = async () => {\n            try {\n                const res = await db.getSellers();\n                // Check if response is { sellers: [...], pagination: ... }\n                if (res && Array.isArray(res.sellers)) {\n                    setSellers(res.sellers);\n                } else if (res && res.success && Array.isArray(res.data)) {\n                    // Check if response is { success: true, data: [...] }\n                    setSellers(res.data);\n                } else if (Array.isArray(res)) {\n                    // Check if response is directly [...]\n                    setSellers(res);\n                } else {\n                    console.error(\"Invalid sellers data format:\", res);\n                    setSellers([]);\n                }\n            } catch (err) {\n                console.error(\"Failed to fetch sellers:\", err);\n                setSellers([]);\n            }\n        };\n        fetchSellers();\n    }, []);\n\n    // Auto-prefix title when seller or base title changes\n    useEffect(() => {\n        if (!selectedSeller) {\n            setTitle(baseTitle);\n            return;\n        }\n\n        const seller = sellers.find(s => (s._id || s.id) === selectedSeller);\n        if (seller) {\n            const prefix = `[${seller.name}] `;\n            // Only update if it doesn't already have the correct prefix or is just the base\n            if (!baseTitle.startsWith(prefix)) {\n                setTitle(`${prefix}${baseTitle}`);\n            } else {\n                setTitle(baseTitle);\n            }\n        }\n    }, [selectedSeller, baseTitle, sellers]);\n\n    const handleStep1Submit = async (e) => {\n        if (e) e.preventDefault();\n        setLoading(true);\n        try {\n            const objectiveData = {\n                title,\n                type,\n                startDate,\n                endDate,\n                sellerId: selectedSeller?._id || selectedSeller,\n                owner,\n                status: 'NOT_STARTED'\n            };\n\n            let res;\n            if (createdObjective) {\n                res = await db.updateObjective(createdObjective._id || createdObjective.id, objectiveData);\n            } else {\n                res = await db.createObjective(objectiveData);\n            }\n\n            if (!res) {\n                throw new Error('No response from server');\n            }\n\n            if (!res || (!res.data && !res._id && !res.id)) {\n                throw new Error('Invalid response from server');\n            }\n\n            const obj = res.data || res;\n            setCreatedObjective(obj);\n            setStep(2); // Move to Template Selection\n        } catch (error) {\n            console.error('Failed to save project', error);\n            alert('Failed to save project. Please try again.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleStep2Submit = () => {\n        if (selectedTemplates.length === 0) {\n            alert('Please select at least one task template');\n            return;\n        }\n        setStep(3); // Move to Task Config\n    };\n\n    const handleFinalSubmit = async () => {\n        if (selectedTemplates.length === 0) return;\n        setLoading(true);\n        try {\n            for (const template of selectedTemplates) {\n                // Create a Key Result for each template\n                const krRes = await db.createKeyResult({\n                    title: template.title,\n                    objectiveId: createdObjective._id || createdObjective.id,\n                    metric: 'Completion',\n                    targetValue: 100,\n                    unit: '%',\n                    status: 'NOT_STARTED'\n                });\n\n                const kr = krRes.data || krRes;\n                const krId = kr._id || kr.id;\n\n                // Generate 1 Task for ALL selected ASINs (or one generic task)\n                await db.createAction({\n                    title: template.title,\n                    description: template.description,\n                    type: template.type,\n                    priority: template.priority,\n                    keyResultId: krId,\n                    sellerId: createdObjective.sellerId || selectedSeller,\n                    asins: selectedAsins, // Pass the array of IDs\n                    assignedTo: defaultAssignee || createdObjective.owner || owner,\n                    status: 'PENDING'\n                });\n            }\n\n            if (onObjectiveCreated) onObjectiveCreated();\n            if (onClose) onClose();\n        } catch (error) {\n            console.error('Failed to create tasks', error);\n            alert('Failed to create tasks. Please try again.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const toggleTemplate = (template) => {\n        const isSelected = selectedTemplates.some(t => t._id === template._id);\n        if (isSelected) {\n            setSelectedTemplates(selectedTemplates.filter(t => t._id !== template._id));\n        } else {\n            setSelectedTemplates([...selectedTemplates, template]);\n        }\n    };\n\n    const toggleCategory = (category, categoryTemplates) => {\n        const allSelected = categoryTemplates.every(ct =>\n            selectedTemplates.some(st => st._id === ct._id)\n        );\n\n        if (allSelected) {\n            // Unselect all in this category\n            setSelectedTemplates(selectedTemplates.filter(st =>\n                !categoryTemplates.some(ct => ct._id === st._id)\n            ));\n        } else {\n            // Select all in this category (avoid duplicates)\n            const remaining = categoryTemplates.filter(ct =>\n                !selectedTemplates.some(st => st._id === ct._id)\n            );\n            setSelectedTemplates([...selectedTemplates, ...remaining]);\n        }\n    };\n\n    const toggleAsin = (asinId) => {\n        if (selectedAsins.includes(asinId)) {\n            setSelectedAsins(selectedAsins.filter(id => id !== asinId));\n        } else {\n            setSelectedAsins([...selectedAsins, asinId]);\n        }\n    };\n\n    return (\n        <div className=\"d-flex flex-column\" style={{ maxHeight: '90vh', minWidth: '600px' }}>\n            <div className=\"modal-header bg-white border-bottom p-4 d-flex justify-content-between align-items-center\">\n                <div>\n                    <h5 className=\"fw-bold mb-0\">{objective ? 'Edit Project' : 'Create New Project'}</h5>\n                    <div className=\"small text-muted mt-1\">\n                        Step {step} of 3: {step === 1 ? 'Project Details' : step === 2 ? 'Select Template' : 'Configure Tasks'}\n                    </div>\n                </div>\n                <button onClick={onClose} className=\"btn btn-icon btn-sm text-muted\">\n                    <X size={20} />\n                </button>\n            </div>\n\n            <div className=\"modal-body p-4\" style={{ overflowY: 'auto' }}>\n                {step === 1 && (\n                    <form id=\"step1Form\" onSubmit={handleStep1Submit}>\n                        <div className=\"row g-4\">\n                            <div className=\"col-12\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase\">Seller / Account</label>\n                                <select\n                                    className=\"form-select form-select-lg\"\n                                    value={selectedSeller}\n                                    onChange={(e) => setSelectedSeller(e.target.value)}\n                                    required\n                                >\n                                    <option value=\"\">Select Seller</option>\n                                    {sellers.map(s => (\n                                        <option key={s._id || s.id} value={s._id || s.id}>\n                                            {s.name} ({s.marketplace})\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div className=\"col-12\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase\">Project Title</label>\n                                <input\n                                    type=\"text\"\n                                    className=\"form-control form-control-lg\"\n                                    placeholder=\"e.g., Growth Strategy\"\n                                    value={baseTitle}\n                                    onChange={(e) => setBaseTitle(e.target.value)}\n                                    required\n                                />\n                            </div>\n\n                            <div className=\"col-12\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase\">Project Owner (Assign To)</label>\n                                <select\n                                    className=\"form-select\"\n                                    value={owner}\n                                    onChange={(e) => setOwner(e.target.value)}\n                                    required\n                                >\n                                    <option value=\"\">Select Owner</option>\n                                    {users.map(u => (\n                                        <option key={u.id || u._id} value={u.id || u._id}>\n                                            {u.firstName ? `${u.firstName} ${u.lastName}` : (u.name || u.email)}\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div className=\"col-12\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase\">Final Name (Auto-Prefixed)</label>\n                                <div className=\"p-3 bg-light rounded-3 border fw-bold text-primary\">\n                                    {title || 'Select seller and title...'}\n                                </div>\n                            </div>\n\n                            <div className=\"col-md-4\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase\">Type</label>\n                                <select className=\"form-select\" value={type} onChange={(e) => setType(e.target.value)}>\n                                    <option value=\"WEEKLY\">Weekly</option>\n                                    <option value=\"MONTHLY\">Monthly</option>\n                                    <option value=\"QUARTERLY\">Quarterly</option>\n                                </select>\n                            </div>\n                            <div className=\"col-md-4\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase\">Start</label>\n                                <input type=\"date\" className=\"form-control\" value={startDate} onChange={(e) => setStartDate(e.target.value)} required />\n                            </div>\n                            <div className=\"col-md-4\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase\">End</label>\n                                <input type=\"date\" className=\"form-control\" value={endDate} onChange={(e) => setEndDate(e.target.value)} required />\n                            </div>\n                        </div>\n                    </form>\n                )}\n\n                {step === 2 && (\n                    <div className=\"template-selection\">\n                        {/* Group templates by category */}\n                        {Object.entries(\n                            templates.reduce((acc, t) => {\n                                acc[t.category] = acc[t.category] || [];\n                                acc[t.category].push(t);\n                                return acc;\n                            }, {})\n                        ).map(([category, categoryTemplates]) => {\n                            const allSelected = categoryTemplates.every(ct =>\n                                selectedTemplates.some(st => st._id === ct._id)\n                            );\n\n                            return (\n                                <div key={category} className=\"mb-4\">\n                                    <div className=\"d-flex justify-content-between align-items-center mb-3\">\n                                        <h6 className=\"fw-bold text-uppercase small text-muted mb-0\">{category}</h6>\n                                        <button\n                                            className={`btn btn-sm ${allSelected ? 'btn-primary' : 'btn-outline-primary'} py-1 px-3 rounded-pill`}\n                                            onClick={() => toggleCategory(category, categoryTemplates)}\n                                        >\n                                            {allSelected ? 'Deselect All' : 'Select Category'}\n                                        </button>\n                                    </div>\n                                    <div className=\"row g-3\">\n                                        {categoryTemplates.map(t => {\n                                            const isSelected = selectedTemplates.some(st => st._id === t._id);\n                                            return (\n                                                <div key={t._id || t.id} className=\"col-md-6\">\n                                                    <div\n                                                        className={`card h-100 cursor-pointer border-2 transition-all ${isSelected ? 'border-primary bg-soft-primary' : 'border-light hov-border-primary'}`}\n                                                        onClick={() => toggleTemplate(t)}\n                                                    >\n                                                        <div className=\"card-body p-3\">\n                                                            <div className=\"d-flex justify-content-between align-items-start mb-2\">\n                                                                <span className=\"badge bg-soft-primary text-primary small\">{t.type}</span>\n                                                                {isSelected && <div className=\"bg-primary text-white rounded-pill p-1\"><Check size={14} /></div>}\n                                                            </div>\n                                                            <h6 className=\"fw-bold mb-1\">{t.title}</h6>\n                                                            <p className=\"text-muted small mb-0 text-truncate-2\">{t.description}</p>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            );\n                                        })}\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                )}\n\n                {step === 3 && (\n                    <div className=\"task-customization\">\n                        <div className=\"mb-4\">\n                            <h6 className=\"fw-bold text-uppercase small text-muted mb-3\">Assign Tasks To</h6>\n                            <select\n                                className=\"form-select\"\n                                value={defaultAssignee}\n                                onChange={(e) => setDefaultAssignee(e.target.value)}\n                            >\n                                <option value=\"\">Auto-assign to Project Owner</option>\n                                {users.map(u => (\n                                    <option key={u.id || u._id} value={u.id || u._id}>\n                                        {u.firstName ? `${u.firstName} ${u.lastName}` : (u.name || u.email)}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div className=\"mb-4\">\n                            <h6 className=\"fw-bold text-uppercase small text-muted mb-3\">Targeted ASINs (Optional)</h6>\n                            <div className=\"asin-selector bg-light rounded-3 border p-3\" style={{ maxHeight: '300px', overflowY: 'auto' }}>\n                                {availableAsins.length > 0 ? (\n                                    <div className=\"row g-2\">\n                                        {availableAsins.map(asin => (\n                                            <div key={asin._id} className=\"col-12\">\n                                                <div\n                                                    className={`d-flex align-items-center p-2 rounded-2 cursor-pointer transition-all ${selectedAsins.includes(asin._id) ? 'bg-primary text-white' : 'bg-white hover-bg-light'}`}\n                                                    onClick={() => toggleAsin(asin._id)}\n                                                >\n                                                    <div className={`me-3 border rounded-pill d-flex align-items-center justify-content-center ${selectedAsins.includes(asin._id) ? 'bg-white text-primary border-white' : 'border-secondary'}`} style={{ width: '20px', height: '20px' }}>\n                                                        {selectedAsins.includes(asin._id) && <Check size={12} />}\n                                                    </div>\n                                                    <div className=\"small fw-bold me-2\">{asin.asinCode}</div>\n                                                    <div className=\"small text-truncate opacity-75\">{asin.title}</div>\n                                                </div>\n                                            </div>\n                                        ))}\n                                    </div>\n                                ) : (\n                                    <div className=\"text-center py-4 text-muted\">No ASINs found for this seller.</div>\n                                )}\n                            </div>\n                            <div className=\"form-text mt-2 small text-muted\">\n                                {selectedAsins.length > 0\n                                    ? `Linking ${selectedAsins.length} ASINs to each created task.`\n                                    : \"No ASINs selected. A single generic task will be created.\"}\n                            </div>\n                        </div>\n\n                        <div className=\"p-3 bg-soft-info text-info rounded-3 border border-info border-opacity-25 small d-flex gap-3\">\n                            <Sparkles className=\"flex-shrink-0\" size={20} />\n                            <div>\n                                <strong>Multi-Template Summary:</strong>\n                                <br />\n                                <ul>\n                                    <li>Templates Selected: {selectedTemplates.length}</li>\n                                    <li>ASINs Selected: {selectedAsins.length || 'Base (1)'}</li>\n                                    <li>Total Tasks to Generate: <strong>{selectedTemplates.length}</strong></li>\n                                </ul>\n                                Each task will include all {selectedAsins.length || 1} selected ASINs.\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"modal-footer bg-white border-top p-4 d-flex justify-content-between align-items-center\">\n                <button\n                    type=\"button\"\n                    onClick={() => step > 1 ? setStep(step - 1) : onClose()}\n                    className=\"btn btn-light\"\n                    disabled={loading}\n                >\n                    {step === 1 ? 'Cancel' : 'Back'}\n                </button>\n\n                <div className=\"d-flex gap-2\">\n                    {step === 1 ? (\n                        <button\n                            form=\"step1Form\"\n                            type=\"submit\"\n                            className=\"btn btn-primary px-4 d-flex align-items-center gap-2\"\n                            disabled={loading || !selectedSeller || !baseTitle}\n                        >\n                            {loading ? <Loader2 className=\"animate-spin\" size={18} /> : <Check size={18} />}\n                            {loading ? 'Creating...' : 'Continue'}\n                        </button>\n                    ) : step === 2 ? (\n                        <button\n                            onClick={handleStep2Submit}\n                            className=\"btn btn-primary px-4\"\n                            disabled={selectedTemplates.length === 0}\n                        >\n                            Configure Tasks ({selectedTemplates.length} Selected)\n                        </button>\n                    ) : (\n                        <button\n                            onClick={handleFinalSubmit}\n                            className=\"btn btn-success px-4 d-flex align-items-center gap-2\"\n                            disabled={loading}\n                        >\n                            {loading ? <Loader2 className=\"animate-spin\" size={18} /> : <Plus size={18} />}\n                            {loading ? 'Finalize & Create Tasks' : 'Finalize Project'}\n                        </button>\n                    )}\n                </div>\n            </div>\n\n            <style>{`\n                .bg-soft-primary { background-color: #e7f1ff; }\n                .bg-soft-info { background-color: #e1f5fe; }\n                .cursor-pointer { cursor: pointer; }\n                .hov-border-primary:hover { border-color: #0d6efd !important; }\n                .hover-bg-light:hover { background-color: #f8f9fa !important; }\n                .transition-all { transition: all 0.2s ease; }\n                .animate-spin { animation: spin 1s linear infinite; }\n                @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n            `}</style>\n        </div>\n    );\n};\n\nexport default ObjectiveManager;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5386, "column": 0}, "map": {"version":3,"sources":["file:///Users/jenilrupapara/Easysell%20Projects/GMS%20Report/gms-dashboard/src/components/actions/ReviewModal.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { X, ThumbsUp, ThumbsDown, AlertCircle } from 'lucide-react';\n\nconst ReviewModal = ({ action, isOpen, onClose, onReview }) => {\n    const [decision, setDecision] = useState('APPROVE');\n    const [comments, setComments] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n\n    if (!isOpen || !action) return null;\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setIsSubmitting(true);\n        try {\n            await onReview(action, decision, comments);\n            onClose();\n        } catch (error) {\n            console.error('Review submission failed:', error);\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <div className=\"modal-overlay\" onClick={onClose} style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1100\n        }}>\n            <div className=\"modal-dialog modal-md shadow-lg\" onClick={(e) => e.stopPropagation()} style={{\n                backgroundColor: 'white',\n                borderRadius: '16px',\n                width: '100%',\n                maxWidth: '500px',\n                overflow: 'hidden'\n            }}>\n                <div className=\"modal-content border-0\">\n                    <div className=\"modal-header border-bottom p-4 d-flex justify-content-between align-items-center\">\n                        <h5 className=\"modal-title fw-bold m-0 d-flex align-items-center gap-2\">\n                            <AlertCircle className=\"text-primary\" size={20} />\n                            Task Review\n                        </h5>\n                        <button type=\"button\" className=\"btn-close border-0 bg-transparent\" onClick={onClose} aria-label=\"Close\">\n                            <X size={20} className=\"text-muted\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit}>\n                        <div className=\"modal-body p-4\">\n                            <div className=\"mb-4\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase mb-2\">Task Title</label>\n                                <div className=\"p-3 bg-light rounded-3 fw-bold text-dark border\">\n                                    {action.title}\n                                </div>\n                            </div>\n\n                            <div className=\"mb-4\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase mb-2\">Assignee</label>\n                                <div className=\"d-flex align-items-center gap-3 p-3 bg-light rounded-3 border\">\n                                    <div className=\"avatar-initial bg-primary text-white border rounded-circle shadow-sm\" style={{ width: '32px', height: '32px', fontSize: '14px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold' }}>\n                                        {(action.assignedTo?.firstName || 'U').charAt(0)}\n                                    </div>\n                                    <div className=\"fw-bold text-dark\">\n                                        {action.assignedTo ? `${action.assignedTo.firstName} ${action.assignedTo.lastName}` : 'Unassigned'}\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"mb-4\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase mb-3\">Your Decision</label>\n                                <div className=\"row g-3\">\n                                    <div className=\"col-6\">\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => setDecision('APPROVE')}\n                                            className={`btn w-100 py-3 rounded-3 d-flex flex-column align-items-center gap-2 border-2 transition-all ${decision === 'APPROVE'\n                                                ? 'btn-success border-success'\n                                                : 'btn-outline-light text-muted border-light text-opacity-50'\n                                                }`}\n                                        >\n                                            <ThumbsUp size={24} />\n                                            <span className=\"fw-bold\">Approve</span>\n                                        </button>\n                                    </div>\n                                    <div className=\"col-6\">\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => setDecision('REJECT')}\n                                            className={`btn w-100 py-3 rounded-3 d-flex flex-column align-items-center gap-2 border-2 transition-all ${decision === 'REJECT'\n                                                ? 'btn-danger border-danger'\n                                                : 'btn-outline-light text-muted border-light text-opacity-50'\n                                                }`}\n                                        >\n                                            <ThumbsDown size={24} />\n                                            <span className=\"fw-bold\">Reject</span>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"mb-0\">\n                                <label className=\"form-label small fw-bold text-muted text-uppercase mb-2\">Review Feedback</label>\n                                <textarea\n                                    className=\"form-control rounded-3 border-light bg-light\"\n                                    rows=\"4\"\n                                    placeholder={decision === 'APPROVE' ? \"Well done! Any minor feedback?\" : \"Explain why the task was rejected and what needs to be fixed...\"}\n                                    value={comments}\n                                    onChange={(e) => setComments(e.target.value)}\n                                    required={decision === 'REJECT'}\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"modal-footer p-4 border-top bg-light d-flex gap-3\">\n                            <button type=\"button\" onClick={onClose} className=\"btn btn-light px-4 py-2 fw-bold text-muted border flex-grow-1\" disabled={isSubmitting}>\n                                Cancel\n                            </button>\n                            <button\n                                type=\"submit\"\n                                className={`btn px-4 py-2 fw-bold flex-grow-1 ${decision === 'APPROVE' ? 'btn-success' : 'btn-danger'}`}\n                                disabled={isSubmitting}\n                            >\n                                {isSubmitting ? 'Submitting...' : `Submit ${decision === 'APPROVE' ? 'Approval' : 'Rejection'}`}\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ReviewModal;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;;;;;AAEA,MAAM,cAAc,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE;;IACtD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,IAAI,CAAC,UAAU,CAAC,QAAQ,OAAO;IAE/B,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,gBAAgB;QAChB,IAAI;YACA,MAAM,SAAS,QAAQ,UAAU;YACjC;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,6BAA6B;QAC/C,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;QAAgB,SAAS;QAAS,OAAO;YACpD,UAAU;YACV,KAAK;YACL,MAAM;YACN,OAAO;YACP,QAAQ;YACR,iBAAiB;YACjB,SAAS;YACT,YAAY;YACZ,gBAAgB;YAChB,QAAQ;QACZ;kBACI,cAAA,6LAAC;YAAI,WAAU;YAAkC,SAAS,CAAC,IAAM,EAAE,eAAe;YAAI,OAAO;gBACzF,iBAAiB;gBACjB,cAAc;gBACd,OAAO;gBACP,UAAU;gBACV,UAAU;YACd;sBACI,cAAA,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;;kDACV,6LAAC,sOAAW;wCAAC,WAAU;wCAAe,MAAM;;;;;;oCAAM;;;;;;;0CAGtD,6LAAC;gCAAO,MAAK;gCAAS,WAAU;gCAAoC,SAAS;gCAAS,cAAW;0CAC7F,cAAA,6LAAC,oMAAC;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;;;;;;;kCAI/B,6LAAC;wBAAK,UAAU;;0CACZ,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAM,WAAU;0DAA0D;;;;;;0DAC3E,6LAAC;gDAAI,WAAU;0DACV,OAAO,KAAK;;;;;;;;;;;;kDAIrB,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAM,WAAU;0DAA0D;;;;;;0DAC3E,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAI,WAAU;wDAAuE,OAAO;4DAAE,OAAO;4DAAQ,QAAQ;4DAAQ,UAAU;4DAAQ,SAAS;4DAAQ,YAAY;4DAAU,gBAAgB;4DAAU,YAAY;wDAAO;kEAC/N,CAAC,OAAO,UAAU,EAAE,aAAa,GAAG,EAAE,MAAM,CAAC;;;;;;kEAElD,6LAAC;wDAAI,WAAU;kEACV,OAAO,UAAU,GAAG,GAAG,OAAO,UAAU,CAAC,SAAS,CAAC,CAAC,EAAE,OAAO,UAAU,CAAC,QAAQ,EAAE,GAAG;;;;;;;;;;;;;;;;;;kDAKlG,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAM,WAAU;0DAA0D;;;;;;0DAC3E,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAI,WAAU;kEACX,cAAA,6LAAC;4DACG,MAAK;4DACL,SAAS,IAAM,YAAY;4DAC3B,WAAW,CAAC,6FAA6F,EAAE,aAAa,YAClH,+BACA,6DACA;;8EAEN,6LAAC,6NAAQ;oEAAC,MAAM;;;;;;8EAChB,6LAAC;oEAAK,WAAU;8EAAU;;;;;;;;;;;;;;;;;kEAGlC,6LAAC;wDAAI,WAAU;kEACX,cAAA,6LAAC;4DACG,MAAK;4DACL,SAAS,IAAM,YAAY;4DAC3B,WAAW,CAAC,6FAA6F,EAAE,aAAa,WAClH,6BACA,6DACA;;8EAEN,6LAAC,mOAAU;oEAAC,MAAM;;;;;;8EAClB,6LAAC;oEAAK,WAAU;8EAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAM1C,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAM,WAAU;0DAA0D;;;;;;0DAC3E,6LAAC;gDACG,WAAU;gDACV,MAAK;gDACL,aAAa,aAAa,YAAY,mCAAmC;gDACzE,OAAO;gDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gDAC3C,UAAU,aAAa;;;;;;;;;;;;;;;;;;0CAKnC,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAO,MAAK;wCAAS,SAAS;wCAAS,WAAU;wCAAgE,UAAU;kDAAc;;;;;;kDAG1I,6LAAC;wCACG,MAAK;wCACL,WAAW,CAAC,kCAAkC,EAAE,aAAa,YAAY,gBAAgB,cAAc;wCACvG,UAAU;kDAET,eAAe,kBAAkB,CAAC,OAAO,EAAE,aAAa,YAAY,aAAa,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ/H;GAtIM;KAAA;uCAwIS"}}]
}